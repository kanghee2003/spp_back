<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shinhan.spp.dao.SampleDao">
  	<select id="tick" resultType="java.lang.String">
		SELECT '1'
	</select>

	<select id="selectSample" parameterType="com.shinhan.spp.dto.in.SampleInDto" resultType="com.shinhan.spp.dto.out.SampleOutDto">
		SELECT '1' AS value1, 1 AS value2, CURRENT_DATE  AS value3, CURRENT_TIMESTAMP::timestamp  AS value4
	</select>


    <select id="selectCommonGrpCodeList" resultType="com.shinhan.spp.dto.out.CommonGrpCodeListDto" parameterType="java.lang.String">
        SELECT com_grp_cd_seq ,
               cm_grp_cd ,
               cm_grp_nm ,
               cm_grp_desc,
               use_flag ,
               ref01,
               ref02,
               ref03,
               ref04,
               ref05,
               ref06,
               ref07,
               ref08,
               ref09,
               ref10,
               ref11,
               ref12,
               ref13,
               ref14,
               ref15,
               '2025-01-01' AS str_date
        FROM tb_com_grp_cd tcgc
        WHERE  1=1
        <if test="searchText != null">
            AND (cm_grp_cd like concat('%',#{searchText},'%') or cm_grp_nm like concat('%',#{searchText},'%'))
        </if>
        order by com_grp_cd_seq
    </select>


    <insert id="insertCommonGrpCode" parameterType="com.shinhan.spp.domain.CommonGrpCode">
        INSERT INTO tb_com_grp_cd
            (
             cm_grp_cd,
             cm_grp_nm,
             cm_grp_desc,
             ref01,
             ref02,
             ref03,
             ref04,
             ref05,
             ref06,
             ref07,
             ref08,
             ref09,
             ref10,
             ref11,
             ref12,
             ref13,
             ref14,
             ref15,
             use_flag,
             rgst_user_id,
             rgst_date_time,
             upt_user_id,
             upt_date_time
            )
        VALUES
            (
            #{cmGrpCd},
            #{cmGrpNm},
            #{cmGrpDesc},
            #{ref01},
            #{ref02},
            #{ref03},
            #{ref04},
            #{ref05},
            #{ref06},
            #{ref07},
            #{ref08},
            #{ref09},
            #{ref10},
            #{ref11},
            #{ref12},
            #{ref13},
            #{ref14},
            #{ref15},
            #{useFlag},
            #{rgstUserId},
            CURRENT_TIMESTAMP,
            #{uptUserId},
            CURRENT_TIMESTAMP
            )
    </insert>

    <update id="updateCommonGrpCode" parameterType="com.shinhan.spp.domain.CommonGrpCode">
        UPDATE tb_com_grp_cd
        SET cm_grp_cd=#{cmGrpCd},
            cm_grp_nm=#{cmGrpNm},
            cm_grp_desc=#{cmGrpDesc},
            ref01=#{ref01},
            ref02=#{ref02},
            ref03=#{ref03},
            ref04=#{ref04},
            ref05=#{ref05},
            ref06=#{ref06},
            ref07=#{ref07},
            ref08=#{ref08},
            ref09=#{ref09},
            ref10=#{ref10},
            ref11=#{ref11},
            ref12=#{ref12},
            ref13=#{ref13},
            ref14=#{ref14},
            ref15=#{ref15},
            use_flag=#{useFlag},
            upt_user_id=#{uptUserId},
            upt_date_time=CURRENT_TIMESTAMP
        WHERE com_grp_cd_seq=#{comGrpCdSeq}
    </update>

    <delete id="deleteCommonGrpCode" parameterType="java.lang.Integer">
        DELETE FROM tb_com_grp_cd
        WHERE com_grp_cd_seq=#{comGrpCdSeq}
    </delete>

    <delete id="deleteCommonCodeGroup" parameterType="java.lang.Integer">
        DELETE FROM tb_com_cd
        WHERE com_grp_cd_seq=#{comGrpCdSeq}
    </delete>

    <select id="selectCommonCodeList" resultType="com.shinhan.spp.dto.out.CommonCodeListDto" parameterType="com.shinhan.spp.dto.in.CommonCodeListParamDto">
        SELECT tcu.com_cd_seq,
               tcu.com_grp_cd_seq,
               tcgc.cm_grp_cd,
               tcu.cm_cd,
               tcu.cm_std_cd,
               tcu.cm_nm,
               tcu.cm_desc,
               tcu.refval01,
               tcu.refval02,
               tcu.refval03,
               tcu.refval04,
               tcu.refval05,
               tcu.refval06,
               tcu.refval07,
               tcu.refval08,
               tcu.refval09,
               tcu.refval10,
               tcu.refval11,
               tcu.refval12,
               tcu.refval13,
               tcu.refval14,
               tcu.refval15,
               tcu.use_flag,
               tcu.sort_seq,
               tcu.rgst_user_id,
               tcu.rgst_date_time,
               tcu.upt_user_id,
               tcu.upt_date_time
        FROM tb_com_cd tcu
        INNER JOIN tb_com_grp_cd tcgc ON tcu.com_grp_cd_seq = tcgc.com_grp_cd_seq
        WHERE  1=1
        <if test="comGrpCdSeq != null">
              AND tcu.com_grp_cd_seq = #{comGrpCdSeq}
        </if>
        <if test="searchText != null">
            AND (cm_grp_cd like concat('%',#{searchText},'%') or cm_grp_nm like concat('%',#{searchText},'%'))
        </if>
        ORDER BY tcu.com_cd_seq
    </select>

    <insert id="insertCommonCode" parameterType="com.shinhan.spp.domain.CommonCode">
        INSERT INTO tb_com_cd
        (
         com_grp_cd_seq,
         cm_cd,
         cm_std_cd,
         cm_nm,
         cm_desc,
         refval01,
         refval02,
         refval03,
         refval04,
         refval05,
         refval06,
         refval07,
         refval08,
         refval09,
         refval10,
         refval11,
         refval12,
         refval13,
         refval14,
         refval15,
         use_flag,
         sort_seq,
         rgst_user_id,
         rgst_date_time,
         upt_user_id,
         upt_date_time
        )
        VALUES
        (
         #{comGrpCdSeq},
         #{cmCd},
         #{cmStdCd},
         #{cmNm},
         #{cmDesc},
         #{refval01},
         #{refval02},
         #{refval03},
         #{refval04},
         #{refval05},
         #{refval06},
         #{refval07},
         #{refval08},
         #{refval09},
         #{refval10},
         #{refval11},
         #{refval12},
         #{refval13},
         #{refval14},
         #{refval15},
         #{useFlag},
         #{sortSeq},
         #{rgstUserId},
         CURRENT_TIMESTAMP,
         #{uptUserId},
         CURRENT_TIMESTAMP
        )
    </insert>

    <update id="updateCommonCode" parameterType="com.shinhan.spp.domain.CommonCode">
        UPDATE tb_com_cd
        SET com_grp_cd_seq=#{comGrpCdSeq},
            cm_cd=#{cmCd},
            cm_std_cd=#{cmStdCd},
            cm_nm=#{cmNm},
            cm_desc=#{cmDesc},
            refval01=#{refval01},
            refval02=#{refval02},
            refval03=#{refval03},
            refval04=#{refval04},
            refval05=#{refval05},
            refval06=#{refval06},
            refval07=#{refval07},
            refval08=#{refval08},
            refval09=#{refval09},
            refval10=#{refval10},
            refval11=#{refval11},
            refval12=#{refval12},
            refval13=#{refval13},
            refval14=#{refval14},
            refval15=#{refval15},
            use_flag=#{useFlag},
            sort_seq=#{sortSeq},
            upt_user_id=#{uptUserId},
            upt_date_time=CURRENT_TIMESTAMP
        WHERE com_cd_seq=#{comCdSeq}
    </update>

    <delete id="deleteCommonCode" parameterType="java.lang.Integer">
        DELETE FROM tb_com_cd
        WHERE com_cd_seq=#{comCdSeq}
    </delete>
</mapper>
